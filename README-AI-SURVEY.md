# AI 问卷生成功能

## 功能概述

AI问卷生成功能允许用户通过自然语言描述来快速创建专业的问卷。用户只需描述想要的问卷类型和内容，AI就会自动生成相应的问卷结构和问题。

## 功能特点

### 1. 智能识别问卷类型
- **客户满意度调查**: 识别关键词如"客户满意度"、"满意度"等
- **员工工作环境调查**: 识别关键词如"员工"、"工作环境"等  
- **市场调研问卷**: 识别关键词如"市场调研"、"产品需求"等
- **活动反馈问卷**: 识别关键词如"活动反馈"、"活动评价"等
- **通用问卷**: 其他类型的问卷会生成通用模板

### 2. 自动生成问题类型
- **单选题**: 用于满意度评价、选择偏好等
- **多选题**: 用于多选特性、多选建议等
- **文本输入**: 用于收集详细建议和反馈
- **文本域**: 用于长文本输入

### 3. 用户友好的界面
- 自然语言输入框
- 示例提示词快速选择
- 实时生成结果预览
- 一键创建问卷

## 使用方法

### 1. 访问AI生成功能
1. 登录系统后，点击"创建问卷"
2. 选择"AI 生成"标签页
3. 在文本框中输入问卷描述

### 2. 输入问卷描述
用户可以使用自然语言描述想要的问卷，例如：
- "创建一个客户满意度调查问卷，包含产品体验、服务质量和改进建议"
- "设计一个员工工作环境调查，了解工作满意度、团队协作和职业发展需求"
- "制作一个市场调研问卷，调查用户对新产品的需求和购买意愿"

### 3. 生成和预览
1. 点击"生成问卷"按钮
2. 系统会显示生成的问卷预览
3. 用户可以查看问卷标题、描述和问题列表
4. 确认无误后点击"创建问卷"

### 4. 编辑和完善
1. 问卷创建成功后会自动跳转到编辑页面
2. 用户可以进一步调整问题内容、选项和设置
3. 可以添加更多问题或修改现有问题

## 技术实现

### 后端架构
- **文件位置**: `server/ai-service.ts`
- **主要函数**: `generateSurveyFromPrompt()`
- **API接口**: `GenerateAISurvey` tRPC mutation

### 前端组件
- **文件位置**: `app/dashboard/create/_components/AISurveyGenerator.tsx`
- **主要功能**: 
  - 用户输入处理
  - API调用
  - 结果预览
  - 问卷创建

### 集成方式
- 在创建问卷页面添加"AI 生成"标签页
- 使用现有的问卷创建和编辑流程
- 保持与现有UI组件的一致性

## 扩展计划

### 1. 集成真实AI服务
当前使用模拟数据，计划集成：
- OpenAI GPT API
- Claude API
- 其他AI服务提供商

### 2. 增强问题类型
- 评分题
- 日期选择
- 文件上传
- 矩阵题

### 3. 智能优化
- 根据行业自动调整问题
- 智能问题排序
- 个性化问卷模板

### 4. 多语言支持
- 支持多种语言的问卷生成
- 国际化界面

## 示例输出

### 客户满意度调查示例
```json
{
  "title": "客户满意度调查",
  "description": "了解客户对我们产品和服务的满意度，帮助我们持续改进",
  "questions": [
    {
      "id": "uuid-1",
      "type": "single",
      "title": "您对我们的产品总体满意度如何？",
      "required": true,
      "props": {
        "options": [
          {"text": "非常满意", "value": "very_satisfied"},
          {"text": "满意", "value": "satisfied"},
          {"text": "一般", "value": "neutral"},
          {"text": "不满意", "value": "dissatisfied"},
          {"text": "非常不满意", "value": "very_dissatisfied"}
        ]
      }
    }
  ]
}
```

## 注意事项

1. **当前限制**: 使用模拟数据，需要集成真实AI服务
2. **问题数量**: 建议生成4-6个问题，避免问卷过长
3. **语言支持**: 目前主要支持中文问卷生成
4. **自定义程度**: 生成后仍需要用户进一步编辑和完善

## 故障排除

### 常见问题
1. **生成失败**: 检查网络连接和API状态
2. **结果不符合预期**: 尝试更详细的描述或使用示例提示
3. **界面无响应**: 刷新页面或重新登录

### 技术支持
如有问题，请联系开发团队或查看系统日志。 